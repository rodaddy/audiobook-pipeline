# Audiobook Pipeline Configuration
# Copy to config.env and adjust as needed

# Directories
WORK_DIR="/var/lib/audiobook-pipeline/work"
MANIFEST_DIR="/var/lib/audiobook-pipeline/manifests"
OUTPUT_DIR="/var/lib/audiobook-pipeline/output"  # Fallback if NFS_OUTPUT_DIR not set
LOG_DIR="/var/log/audiobook-pipeline"

# Encoding defaults
BITRATE="64k"
CHANNELS="1"
CODEC="aac"

# Permissions (readarr user)
FILE_OWNER="2018:2000"
FILE_MODE="644"
DIR_MODE="755"

# Behavior
DRY_RUN=false
FORCE=false
VERBOSE=false
CLEANUP_WORK_DIR=true
LOG_LEVEL="INFO"

# Metadata enrichment
# READARR_API_URL=""     # e.g., http://localhost:8787/api/v1
# READARR_API_KEY=""     # Readarr API key from Settings > General

# Audnexus API
AUDNEXUS_REGION="us"
AUDNEXUS_CACHE_DIR=""  # defaults to WORK_DIR if empty
AUDNEXUS_CACHE_DAYS=30
CHAPTER_DURATION_TOLERANCE=5  # percent

# Metadata enrichment (Phase 2)
METADATA_SKIP=false          # Set true to skip metadata enrichment entirely
FORCE_METADATA=false         # Set true to re-fetch metadata even if cached

# Folder organization and output (Phase 3)
NFS_OUTPUT_DIR="/mnt/media/AudioBooks"  # Plex library root on NFS
CREATE_COMPANION_FILES=true             # Deploy cover.jpg, desc.txt, reader.txt alongside M4B

# Archive
ARCHIVE_DIR="/var/lib/audiobook-pipeline/archive"  # Local disk preferred (faster, no root squash)
ARCHIVE_RETENTION_DAYS=90                           # Future cleanup job will purge older archives

# Concurrency control (Phase 4)
LOCK_DIR="/var/lib/audiobook-pipeline/locks"

# Automation directories for Readarr webhook and cron scanner (Phase 4)
INCOMING_DIR="/mnt/media/AudioBooks/_incoming"
QUEUE_DIR="/var/lib/audiobook-pipeline/queue"
PROCESSING_DIR="/var/lib/audiobook-pipeline/processing"
COMPLETED_DIR="/var/lib/audiobook-pipeline/completed"
FAILED_DIR="/var/lib/audiobook-pipeline/failed"
PIPELINE_BIN="/opt/audiobook-pipeline/bin/audiobook-convert"
STABILITY_THRESHOLD=120  # seconds (2 minutes) -- cron scanner skips books modified within this window
